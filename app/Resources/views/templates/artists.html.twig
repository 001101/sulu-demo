{% extends "master.html.twig" %}

{% block content %}
    {% include(':includes:headerimage.html.twig') %}

    <div property="artists">
        {% if content.artists|length %}
            <section class="artists">
                <div class="artists-content">
                    <div class="grid" property="artists">
                        {% for artist in content.artists %}
                            <div class="grid__item desk--one-third lap--one-half palm--one-whole">
                                <div class="artists-content-elem">
                                    {% set url = "" %}

                                    {% if content|default('') %}
                                        {% set url = sulu_content_path(artist.url) %}
                                    {% endif %}

                                    {% if artist.image|length and artist.image|first.thumbnails['360x250'] is defined %}
                                        <div class="artists-content-elem-image">
                                            <img src="{{ artist.image|first.thumbnails['360x250'] }}"
                                                 alt="{{ artist.image|first.title }}"/>

                                            {% if artist.title|default('') %}
                                                <div class="artists-content-elem-image-hover">
                                                    <a href="{{ url }}" class="heading--h1">
                                                        {{ artist.title }}
                                                    </a>
                                                </div>
                                            {% endif %}
                                        </div>
                                    {% endif %}

                                    <div class="artists-content-elem-text">
                                        {% if artist.published|default('') %}
                                            <p class="artists-content-elem-text-date">
                                                {{ artist.published.date|date('d.m.Y') }}
                                            </p>
                                        {% endif %}

                                        {% if artist.title|default('') %}
                                            <a href="{{ url }}" class="artists-content-elem-text-artist">
                                                {{ artist.title }}
                                            </a>
                                        {% endif %}

                                        {% set author = "" %}

                                        {% if artist.author|length %}
                                            {% set author = sulu_resolve_contact(artist.author|first.id) %}
                                        {% else %}
                                            {% set author = sulu_resolve_contact(artist.creator) %}
                                        {% endif %}

                                        {% if author|default('') %}
                                            <span class="artists-content-elem-text-posted">
                                        <i class="artists-content-elem-text-posted-rectangle"></i>
                                        <p class="artists-content-elem-text-posted-by">{{ 'posted'|trans }}</p>
                                        <p class="artists-content-elem-text-posted-author">{{ author.fullName }}</p>
                                    </span>
                                        {% endif %}

                                        {% if artist.description|default('') %}
                                            {{ artist.description|raw }}
                                        {% endif %}

                                        {% if artist.url|default('') %}
                                            <a href="{{ url }}" class="button--medium">
                                                {{ 'read_more'|trans }}
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </section>
        {% endif %}
    </div>

    <div property="discographyTitle">
        <div property="discographyData">
            {% if content.discographyTitle|default('') or content.discographyData|default('') %}
                {% include(':includes:discography_element.html.twig') with {
                    'block' : {
                    'discographyTitle': content.discographyTitle|default('') ? content.discographyTitle : '',
                    'discographyData': content.discographyData|default('') ? content.discographyData : ''
                } } %}
            {% endif %}
        </div>
    </div>
{% endblock %}